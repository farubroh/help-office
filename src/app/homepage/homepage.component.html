<div class="layout-container">
  
  <!-- <aside class="sidebar">
    

    <nav class="menu">
      <a href="#" class="menu-item active"><i class="ph ph-squares-four"></i></a>
      <a href="#" class="menu-item"><i class="ph ph-list-dashes"></i></a>
      <a href="#" class="menu-item"><i class="ph ph-paperclip"></i></a>
      <a href="#" class="menu-item"><i class="ph ph-clock"></i></a>
      <a href="#" class="menu-item"><i class="ph ph-check-circle"></i></a>
    </nav>

    <div class="bottom-actions">
      <div class="theme-toggle">
        <i class="ph ph-sun"></i>
        <i class="ph ph-moon"></i>
      </div>
    </div>
  </aside> -->
  <aside [class.w-72]="sidebarOpen" [class.w-16]="!sidebarOpen"
         class="bg-white border-r border-gray-200 p-6 flex flex-col gap-6 fixed top-0 left-0 bottom-0 overflow-auto z-40 transition-all duration-300">

    <!-- Logo + Hamburger -->
    <div class="flex items-center justify-between">
      <!-- Left side (logo + title) -->
      <div class="flex items-center gap-3" *ngIf="sidebarOpen">
        <img style="max-width: 15%" src="../assets/images/branding.jpg" alt="IUMS">
        <h1 class="text-4xl font-semibold">IUMS</h1>
      </div>

      <!-- Button always visible -->
      <button (click)="toggleSidebar()" class="p-2 ml-auto">
        <i class="bi bi-list text-gray-700 text-xl"></i>
      </button>
    </div>

    <!-- Sidebar Menu -->
    <nav class="mt-4 flex-1">
      <ul class="space-y-2 text-sm">

        <!-- HelpDesk (always visible) -->
        <!-- HelpDesk (always visible) -->
        <li>
          <div (click)="toggleMenu('product')"
               class="flex items-center justify-between p-3 rounded-lg cursor-pointer hover:bg-gray-100 relative">
            <div class="flex items-center gap-3">
              <i class="bi bi-box"></i>
              <span *ngIf="sidebarOpen">HelpDesk</span>
            </div>
            <i *ngIf="sidebarOpen"
               [class.bi-chevron-down]="expandedMenu==='product'"
               [class.bi-chevron-up]="expandedMenu!=='product'"></i>
          </div>

          <!-- Expanded submenu -->
          <ul *ngIf="expandedMenu==='product' && sidebarOpen"
              class="mt-1 ml-6 space-y-1 border-l border-gray-200 relative pl-4">

            <li class="relative group">
              <div (click)="navigateToConfiguration()"
                   class="flex items-center justify-between cursor-pointer hover:bg-gray-100 px-2 py-2 rounded-lg">
                <div class="flex items-center gap-3">
                  <span class="text-gray-700 font-medium">Configuration</span>
                </div>
              </div>
              <!-- Connector curve -->
              <span class="absolute -left-[1.05rem] top-0 h-full w-4 border-l border-gray-200"></span>
            </li>

            <li class="relative group">
              <div (click)="navigateToAdminDashboard()"
                   class="flex items-center justify-between cursor-pointer hover:bg-gray-100 px-2 py-2 rounded-lg">
                <div class="flex items-center gap-3">
                  <span *ngIf="sidebarOpen" class="text-gray-700 font-medium">Admin Dashboard</span>
                </div>
              </div>
              <span class="absolute -left-[1.05rem] top-0 h-full w-4 border-l border-gray-200"></span>
            </li>

            <li class="relative group">
              <div (click)="navigateToUserDashboard()"
                   class="flex items-center justify-between cursor-pointer hover:bg-gray-100 px-2 py-2 rounded-lg">
                <div class="flex items-center gap-3">
                  <span *ngIf="sidebarOpen" class="text-gray-700 font-medium">User Dashboard</span>
                </div>
              </div>
              <span class="absolute -left-[1.05rem] top-0 h-full w-4 border-l border-gray-200"></span>
            </li>

            <li class="relative group">
              <div (click)="navigateToDeveloperDashboard()"
                   class="flex items-center justify-between cursor-pointer hover:bg-gray-100 px-2 py-2 rounded-lg">
                <div class="flex items-center gap-3">
                  <span *ngIf="sidebarOpen" class="text-gray-700 font-medium">Developer Dashboard</span>
                </div>
              </div>
              <span class="absolute -left-[1.05rem] top-0 h-full w-4 border-l border-gray-200"></span>
            </li>
          </ul>
        </li>


      </ul>
    </nav>
  </aside>

  <main class="main-content">
    
    <div class="card header-card">
      <div class="header-top">
        <div class="title-group">
          <h1>BoithokX <i class="ph ph-caret-down"></i></h1>
          <!-- <h1>GolBoithok <i class="ph ph-caret-down"></i></h1>
          <h1>Shobai.ai <i class="ph ph-caret-down"></i></h1> -->
          <!-- <span class="status-badge on-track">‚óè On Track <i class="ph ph-caret-down"></i></span>
          <span class="last-updated">Last updated on: 01st March, 2022</span> -->
        </div>
        <div class="search-bar">
          <i class="ph ph-magnifying-glass"></i>
          <input type="text" placeholder="Search">
        </div>
      </div>

      <div class="header-bottom">
        <div class="assignees">
          <div class="avatars">
            <span class="assign-label">Assigned to project</span>
            @for(id of projectMembers; track id) {
              <img [src]="'https://i.pravatar.cc/150?img=' + id" alt="Member">
            }
            <div class="avatar-more">+2</div>
          </div>
          <button class="btn-primary"><i class="ph ph-user-plus"></i> Assign Member</button>
        </div>
        
        <div class="tabs">
          <a href="#" class="active">Overview</a>
          <a href="#">List</a>
          <a href="#">Board</a>
          <a href="#">Timeline</a>
          <a href="#">Calendar</a>
          <a href="#">Dashboard</a>
          <a href="#">Messages</a>
          <a href="#">Files</a>
        </div>
      </div>
    </div>

    <div class="dashboard-grid">
      
      <div class="card task-status">
        <div class="card-header">
          <h3>Task Status</h3>
          <div class="toggle-pill">
            <span class="active">All Task</span>
            <span>My tasks</span>
          </div>
        </div>
        
        <div class="task-list">
          @for (task of tasks; track task.name) {
            <div class="task-item">
              <div class="task-info">
                <div class="radio-circle"></div>
                <span class="task-name">{{ task.name }}</span>
                <span class="tag" [ngClass]="task.tagType">
                  <i *ngIf="task.tagType !== 'info'" class="ph ph-warning-circle"></i> 
                  <i *ngIf="task.tagType === 'info'" class="ph ph-hourglass"></i>
                  {{ task.tag }}
                </span>
              </div>
              <span class="task-time">{{ task.time }}</span>
              <img [src]="'https://i.pravatar.cc/150?img=' + task.userImg" class="avatar-sm">
            </div>
          }
        </div>
      </div>

      <!-- <div class="card time-tracking">
        <div class="card-header">
          <h3>Time tracking</h3>
          <i class="ph ph-dots-three"></i>
        </div>
        
        <div class="timer-content">
          <div class="timer-project">Filllo Design System</div>
          <div class="timer-display">
            <span>{{ pad(timerH) }}<small>h</small></span>
            <span>{{ pad(timerM) }}<small>m</small></span>
            <span>{{ pad(timerS) }}<small>s</small></span>
          </div>
          
          <div class="timer-controls">
            <button class="control-btn icon-only"><i class="ph ph-arrow-counter-clockwise"></i></button>
            <button class="control-btn play" (click)="toggleTimer()">
              <i class="ph" [ngClass]="timerRunning ? 'ph-pause' : 'ph-play'"></i>
            </button>
            <button class="control-btn icon-only"><i class="ph ph-stop"></i></button>
          </div>
        </div>
      </div> -->

      <div class="card upcoming-tasks">
        <div class="card-header">
          <h3>Upcoming Tasks</h3>
          <button class="btn-success">Add New Task <i class="ph ph-plus"></i></button>
        </div>

        <div class="calendar-strip">
          <button class="nav-arrow"><i class="ph ph-caret-left"></i></button>
          @for(day of calendarDays; track day.day) {
            <div class="day-item" [class.active]="day.active">
              <span class="d-name">{{ day.day }}</span>
              <span class="d-num">{{ day.date }}</span>
            </div>
          }
          <button class="nav-arrow"><i class="ph ph-caret-right"></i></button>
        </div>

        <div class="timeline">
          <div class="timeline-row">
            <span class="time">10AM</span>
            <div class="timeline-dot"></div>
            <div class="timeline-card">
              <div class="avatars-mini">
                <img src="https://i.pravatar.cc/150?img=10">
                <img src="https://i.pravatar.cc/150?img=12">
              </div>
              <span>Discovery call</span>
            </div>
          </div>
           <div class="timeline-row">
            <span class="time">11AM</span>
            <div class="timeline-dot"></div>
            <div class="timeline-card blue-tint">
              <div class="avatars-mini">
                <img src="https://i.pravatar.cc/150?img=20">
              </div>
              <span>Company onboarding</span>
            </div>
            <div class="timeline-card blue-tint offset-card">
                <div class="avatars-mini">
                  <img src="https://i.pravatar.cc/150?img=5">
                </div>
                <span>Company onboarding</span>
            </div>
          </div>
        </div>
      </div>

      <div class="card recent-activity">
        <div class="card-header">
          <h3>Recent activity (7)</h3>
          <a href="#" class="see-all">See all ></a>
        </div>

        <div class="activity-list">
          @for(act of activities; track act.user) {
            <div class="activity-item">
              <img [src]="'https://i.pravatar.cc/150?img=' + act.userImg" class="avatar-md">
              <div class="activity-text">
                <div class="name">{{ act.user }}</div>
                <div class="desc">{{ act.action }} <span class="highlight">{{ act.target }}</span></div>
              </div>
              <span class="act-time">{{ act.time }}</span>
            </div>
          }
        </div>
      </div>

    </div>
  </main> 
</div>